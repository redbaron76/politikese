AD.UI={$body:$(document.body),$win:$(window),$wrapper:$(".wrapper"),$navbar:$(".navbar"),$overlay:$(".overlay"),$container:$(".container"),$alert_box:$(".alert-msg"),$breadcrumb:$(".breadcrumb-wrapper"),$btn_clicked:null,$box_checked:null,$box_status:null,$layout_radio:null,$modal:null,btn_text:null,lang:null,timeout:1e3,init:function(){this.addHover(),this.loadingSpinner(),this.loadingCheckbox(),this.onCloseModal(),this.alignTHead(),this.windowResize(this.adjustModal())},addHover:function(){var e,t;$(".ad-hovering").on("mouseenter",".ad-hover",function(){e=$(this),t=e.data("hover"),e.children("*").hide(),e.append(AD.Templates[t+"_tpl"])}).on("mouseleave",".ad-hover",function(){e=$(this),e.find(".ad-hovertext").remove(),e.children("*").show()})},addSpin:function(){this.btn_text=this.$btn_clicked.html(),this.checkSpin()||(-1==this.btn_text.indexOf("<i")?this.$btn_clicked.prepend(AD.Templates.loading_tpl):this.$btn_clicked.find("i").removeClass().addClass("fa fa-refresh fa-spin"))},addShake:function(){AD.Form.$form.addClass("shake")},hideModal:function(){this.$modal&&this.$modal.modal("hide")},onCloseModal:function(){$(".modal").on("hidden.bs.modal",function(){AD.UI.resetBtn()})},createAlertMessage:function(e){this.$alert_box.remove();var t=$("<div/>").attr("class","alert-msg").addClass(e.status).html(e.msg);"expired"==e.type?AD.Form.redirectTo("login"):(this.$alert_box=t,Modernizr.touch?(this.$alert_box.addClass("fixfixed"),this.$body.animate({scrollTop:0},0).prepend(t)):this.$body.prepend(t))},checkAllCopy:function(){$("#copy_all").change(function(){$(".copy_block").prop("checked",this.checked)})},checkSpin:function(){return this.$btn_clicked.find("i").hasClass("fa-spin")},checkBoxSpin:function(){return this.$box_checked?this.$box_checked.next("i").hasClass("fa-spin"):!1},checkEmptyList:function(){return AD.Sortable.$item_list.children().html()},activePageList:function(){return AD.Sortable.$page_list.filter("[rel="+this.lang+"]")},loadingSpinner:function(){var e=this;$(".ad-loading").on("click",function(t){t.preventDefault();var a=$(this);e.resetBtn(),e.$btn_clicked=a,e.addSpin()})},loadingCheckbox:function(){var e=this;$(".ad-checking").on("click",":checkbox",function(t){e.$box_checked=$(this),e.checkBoxSpin()?t.preventDefault():(e.$box_status=this.checked?!0:!1,e.$box_status&&t.preventDefault(),e.$box_checked.after(AD.Templates.loading_tpl),e.$box_checked.hide())})},magnificPopup:function(){$(".ad-lightbox").magnificPopup({delegate:"[data-toggle=lightbox]",type:"image"})},alignTHead:function(){var e=$("tr[data-id]:first > td");e&&$.each(e,function(e,t){var a=$(t).outerWidth()/$("body").width()*100;$(".ad-thead").find("th").eq(e).css({width:a+"%"})})},paginateList:function(e){$.LoadNext({container:".ad-paginating",item:e,label:AD.load,btn_class:"load-more",onClickNext:this.paginateSpinner,onLoadComplete:function(){AD.UI.paginateSpinnerReset(),AD.UI.alignTHead()}})},paginateSpinner:function(){var e=$(this);AD.UI.$btn_clicked=e,AD.UI.addSpin()},paginateSpinnerReset:function(){AD.UI.resetBtn()},resetCheckbox:function(){this.$box_checked&&(this.$box_checked.next("i").remove(),this.$box_checked.prop("checked",this.$box_status),this.$box_checked.show())},resetOtherCheckboxes:function(){this.$box_checked.parents(".ad-select").find("input[type=checkbox]").prop("checked",!1)},resetBtn:function(){var e=this;this.btn_text&&this.$btn_clicked&&(e.$btn_clicked.html(e.btn_text),e.$btn_clicked=null)},resetShake:function(){AD.Form.$form.removeClass("shake")},resetFieldErrors:function(){var e=AD.Form.$form;e.find(".form-group").removeClass("has-error"),e.find(".err").remove()},resetModalShake:function(){this.$modal&&this.$modal.on("hidden.bs.modal",function(){AD.Form.$form&&AD.Form.$form.removeClass("shake")})},showLogo:function(){var e=$(".login-wrapper");e.on("focus","input",function(){e.addClass("animate")}).on("blur","input",function(){e.removeClass("animate")})},tagSelectize:function(){$(".ad-selectize").selectize({delimiter:",",valueField:"id",labelField:"name",searchField:["name"],maxOptions:10,create:function(e){return{id:e,name:e}},render:{item:function(e){return'<div data-value="'+e.id+'">'+e.name+"</div>"},option:function(e,t){return'<div data-value="'+e.id+'">'+t(e.name)+"</div>"}},load:function(e,t){if(!e.length)return t();var a=AD.Utils.url("api/tags");$.post(a,{q:e},function(e){t(e)})}})},adjustModal:function(){$(".modal").each(function(){0==$(this).hasClass("in")&&$(this).show();var e=$(window).height()-60,t=$(this).find(".modal-header").outerHeight()||2,a=$(this).find(".modal-footer").outerHeight()||2;$(this).find(".modal-content").css({"max-height":function(){return e}}),$(this).find(".modal-body").css({"max-height":function(){return e-(t+a)}}),$(this).find(".modal-dialog").css({"margin-top":function(){return(e-$(this).outerHeight())/2}}),0==$(this).hasClass("in")&&$(this).hide()})},windowResize:function(e){$(window).resize(e).trigger("resize")}},AD.Activity={duration:[],durationStatic:[],timeOut:null,init:function(){this.start(),this.stop(),this.printTime(0),this.printStaticTime()},start:function(){var e=this;$(".ad-activity").on("click",".activity-start",function(t){t.preventDefault();var a=$(this),i=a.data("id");e.postActivity("start","api/activity/start",i)})},stop:function(){var e=this;$(".ad-activity").on("click",".activity-stop",function(t){t.preventDefault();var a=$(this),i=a.data("id");e.postActivity("stop","api/activity/stop",i)})},postActivity:function(e,t,a){var i=this;$.ajax({type:"POST",url:AD.Utils.url(t),data:{ticket_id:a},success:this.manageActivity,context:this,dataType:"json"}).done(function(){"start"==e&&(AD.UI.resetBtn(),i.printTime(0))})},loadStopView:function(e){var t=_.template(AD.Templates.stop_btn_tpl),a=t(e);$td_wrapper=$(".ad-activity").find(".ad-wrapper[data-id="+e.tid+"]"),$td_wrapper.find(".activity-start").remove(),$td_wrapper.prepend(a)},loadStartView:function(e){var t=_.template(AD.Templates.start_btn_tpl),a=t(e);$td_wrapper=$(".ad-activity").find(".ad-wrapper[data-id="+e.tid+"]"),$td_wrapper.find(".activity-stop").remove(),$td_wrapper.prepend(a)},manageActivity:function(e){"start"==e.action&&this.loadStopView(e),"stop"==e.action&&this.loadStartView(e),e.msg&&AD.UI.createAlertMessage(e)},formatDigits:function(e){return 10>e?"0"+e:e},printTime:function(e){var t=this,a=$(".ad-elapsing");clearTimeout(this.timeOut),$.each(a,function(a,i){var n=$(i),r=n.data("start");if(0==e)var o=moment.duration(r,"seconds");else var o=e[a].add(1,"s");t.duration[a]=o;var s=o.hours()+"h"+t.formatDigits(o.minutes())+"m"+t.formatDigits(o.seconds())+"s";n.html(s)}),this.timeOut=setTimeout(function(){t.printTime(t.duration)},1e3)},printStaticTime:function(){var e=this,t=$(".ad-elapsed");$.each(t,function(t,a){var i=$(a),n=i.data("start"),r=moment.duration(n,"seconds");e.durationStatic[t]=r;var o=r.hours()+"h"+e.formatDigits(r.minutes())+"m"+e.formatDigits(r.seconds())+"s";i.html(o)})},setCheckReport:function(){$(".ad-checkreport").on("click",function(){var e=$(this).parents("tr").find(".ad-reporting");e.trigger("click")})},setToReport:function(){var e=$("#create-report");$(".ad-reporting").on("click",function(){e.removeAttr("disabled"),0===$(".ad-reporting:checked").length&&e.attr("disabled","disabled")})}},AD.Factory={url:null,tpl:null,createCode:function(){var e=this;$("#create-code").on("click",function(t){t.preventDefault(),e.tpl=AD.Templates.new_code_tpl,e.url=AD.Utils.url("api/code/create"),e.sendRequest(null)})},createRole:function(){var e=this;$("#create-role").on("click",function(t){t.preventDefault(),e.tpl=AD.Templates.new_role_tpl,e.url=AD.Utils.url("api/role/create"),e.sendRequest(null)})},createUser:function(){var e=this;$("#create-user").on("click",function(t){t.preventDefault(),e.tpl=AD.Templates.new_user_tpl,e.url=AD.Utils.url("api/user/create"),e.sendRequest(null)})},processResponse:function(e){if("success"==e.status){var t=_.template(this.tpl),a=t(e);"code"==e.render&&this.renderNewCode(a),"role"==e.render&&this.renderNewRole(a),"user"==e.render&&this.renderNewUser(a),AD.UI.createAlertMessage(e,null,null)}},renderNewCode:function(e){var t=AD.Sortable.$item_list.find("tbody");t.find(".list-empty").remove(),t.prepend(e)},renderNewRole:function(e){var t=AD.Sortable.$item_list.find("tbody");t.find(".list-empty").remove(),t.append(e)},renderNewUser:function(e){var t=AD.Sortable.$item_list.find("tbody");t.find(".list-empty").remove(),t.prepend(e)},sendRequest:function(e){this.url?$.ajax({type:"POST",url:this.url,data:e,success:this.processResponse,context:this,dataType:"json"}).done(function(){AD.UI.resetBtn(),AD.UI.alignTHead()}):console.log("No this.url")}},AD.File={addFileItem:function(e){var t=_.template(AD.Templates.file_item_tpl),a=t(e),i=$(".ad-update");i.find(".list-empty").remove(),i.prepend(a)},showUploadPath:function(e,t){this.addFileItem(t),$("li.print").html(e),$("[name=file_name]").val(""),$("[name=file_size]").val("")},uploadFile:function(){var e=this;$("#fileuploader").uploadFile({url:AD.Utils.url("api/file/upload"),fileName:"files",formData:{page_id:AD.Utils.pageId()},allowedTypes:AD.mimes,maxUploads:AD.max_upload_items,uploadButtonClass:"btn btn-primary btn-block button",uploadCancelClass:"btn btn-danger abort",uploadStartClass:"btn btn-success start",progressDivClass:"progress progress-striped active",returnType:"json",onSubmit:function(){},onSuccess:function(t,a){$(".progress").remove(),$.each(a,function(t,a){var i=$(".status-bar ul > li[rel="+t+"]");if(i.find("i").removeClass().addClass(a.icon),a.errors){var n=_.template(AD.Templates.file_error_tpl);$.each(a.errors,function(e,t){i.after(n({error:t}))})}a.item&&e.addFileItem(a.item)}),AD.UI.createAlertMessage(a)}})}},AD.Form={url:null,redirect_uri:null,to:0,$form:null,$item:null,init:function(){this.confirmDialog(),this.copyDialog(),this.submitForm(),this.submitAjax(),console.log("init Form")},confirmDialog:function(){var e=this;$(".ad-confirming").on("click",".ad-confirm",function(t){t.preventDefault();var a=$(this),i=a.data("id");e.$item=a.parents("tr").filter("[data-id="+i+"]"),AD.UI.$modal=$(a.data("target")),AD.UI.$modal.find("input[name=item_id]").val(i),AD.UI.resetModalShake()})},copyDialog:function(){$(".ad-copy").on("click",function(e){e.preventDefault();var t=$(this);AD.UI.$modal=$(t.data("target"))})},submitForm:function(){$(".ad-form-submit").on("click",function(e){e.preventDefault();var t=$(this);if(t.is("[data-form]")){var a=$("#"+t.data("form"));a.submit()}else t.parents("form").submit()})},submitAjax:function(){var e=this;$(".ad-ajax-submit").on("click",function(t){t.preventDefault();var a=$(this);a.is("[data-to]")&&(e.to=a.data("to")),e.$form=a.parents("form"),AD.UI.resetShake(),e.url=e.$form.attr("action"),e.sendRequest()})},sendRequest:function(){if(this.url){var e=this,t=1e3*e.to;setTimeout(function(){$.ajax({type:"POST",url:e.url,data:e.$form.serialize(),success:e.validateForm,context:e,dataType:"json"}).done(function(){AD.UI.resetBtn()})},t)}else console.log("No this.url")},fieldErrors:function(e){AD.UI.addShake(),$.each(e,function(e,t){$item=$(".form-group[rel="+e+"]"),$item.find(".help-block").remove(),$item.addClass("has-error"),$item.find("label").addClass("control-label"),$item.children("label[for="+e+"]").append('<span class="err"> - '+t+"</span>")})},redirectTo:function(e){window.location=AD.Utils.url(e)},redirectUrl:function(e){window.location=e},removeListItem:function(){var e=this.$item.parent();this.$item.remove(),e.html().trim()||(e.hasClass("ad-active")?e.append(AD.Templates.empty_tpl):(e.siblings("[data-action]").remove(),e.remove())),AD.UI.hideModal(),AD.UI.alignTHead()},updateForm:function(e,t){$(e).val(t)},validateForm:function(e){AD.UI.resetFieldErrors(),e.errors&&this.fieldErrors(e.errors),e.remove&&this.removeListItem(e.remove),"error"==e.status&&AD.UI.addShake(),e.msg&&AD.UI.createAlertMessage(e),e.print&&AD.File.showUploadPath(e.print.text,e.print.item),e.redirect&&this.redirectUrl(e.route),e.update&&this.updateForm(e.update,e.id),e.close&&AD.UI.hideModal()}},AD.Selectize={itemSelect:function(e,t,a,i,n){$(e).selectize({delimiter:",",valueField:t,labelField:a,searchField:[],maxOptions:i,onInitialize:function(){this.settings.searchField[0]=a},render:{item:function(e){return'<div data-value="'+e[t]+'">'+e[a]+"</div>"},option:function(e,i){if(e.client){var n=moment(e.created_at).format("DD/MM/YYYY");return'<div data-value="'+e[t]+'">'+i(e[a])+'<span class="select-client-details">'+i(e.client.rag_sociale)+" del "+i(n)+"</span></div>"}return'<div data-value="'+e[t]+'">'+i(e[a])+"</div>"}},load:function(e,t){if(!e.length)return t();var a=AD.Utils.url(n);$.post(a,{q:e},function(e){t(e)})}})}},AD.Sortable={$item_list:$(".ad-list"),$item_moved:null,$spinner_holder:null,dropped_id:null,dropped_class:null,init:function(){this.pageList(),this.pageExpColl()},checkSpin:function(){return this.$spinner_holder.hasClass("fa-spin")},roleList:function(){var e=this,t=e.$item_list.hasClass("ad-moving");$("#sort-roles").tableDnD({onDragClass:"warning",onDrop:function(a,i,n){var r=$.tableDnD.serialize();e.$item_moved=$(i),e.reorderItem(n,".fa-pencil-square-o",t),e.reorderItemPost(r,"api/role/move",n,t)}})},reorderItem:function(e,t,a){this.dropped_id=e,a&&this.reorderItemLoading(t)},reorderItemLoading:function(e){this.dropped_id;this.$spinner_holder=this.$item_moved.find(e);var t=this.$spinner_holder;this.dropped_class=t.attr("class"),this.checkSpin()?(this.$spinner_holder.removeClass().addClass(this.dropped_class),t.removeClass().addClass("fa fa-refresh fa-spin")):t.removeClass().addClass("fa fa-refresh fa-spin")},reorderItemReset:function(){var e=(this.dropped_id,this.$spinner_holder);e.removeClass().addClass(this.dropped_class)},reorderItemPost:function(e,t,a,i){var n=this;$.post(AD.Utils.url(t),{items:e,item:a},function(e){AD.UI.createAlertMessage(e,null,null),n.setLevel(e.levels)},"json").done(function(){i&&n.reorderItemReset()})},reorderStringify:function(e){if(JSON&&e){var t=e.nestable("serialize");return JSON.stringify(t)}var a={status:"error",msg:"Unsupported browser!"};AD.UI.createAlertMessage(a,null,null)},setLevel:function(e){$.each($("#sort-roles").find("tr"),function(t,a){$(a).find("td").eq(2).html(e[t])})}},AD.Templates={empty_tpl:'<tr class="list-empty"><td>'+AD.noresult+"</td><</tr>",stop_tpl:'<span class="ad-hovertext"><i class="fa fa-pause"></i> '+AD.stop+"</span>",file_error_tpl:'<li class="error msg"><i class="fa fa-exclamation-circle"></i><%= error %></li>',file_item_tpl:'<li class="file-item" data-id="<%= id %>"><% if(is_image) { %><p><a href="<%= url_link %>" data-toggle="lightbox"><%= ico %></a><span><%= file_name %></span></p><% } else { %><p><a href="<%= url_link %>" target="_blank"><%= ico %></a><span><%= file_name %></span></p><% } %><label><input type="checkbox" value="<%= id %>" class="ad-checkbox" checked="checked"><strong></strong></label><div class="btn-edit"><a href="<%= url_edit %>" class="btn btn-sm btn-primary"><i class="fa fa-pencil-square-o"></i></a>\n<a href="#" data-toggle="modal" data-target=".file-delete" data-id="<%= id %>" class="btn btn-sm btn-danger ad-confirm"><i class="fa fa-trash-o"></i></a></div></li>',file_tool_tpl:'<li class="file-item"><div><a href="<%= url %>" data-toggle="lightbox" class="ad-img"><img src="<%= cms_url %>" class="cms-thumb" alt=""></a><p><%= name %></p></div><a href="<%= name %>" class="ad-insert" data-tag="img"><i class="fa fa-chevron-right"></i></a></li>',loading_tpl:'<i class="fa fa-refresh fa-spin"></i> ',new_code_tpl:'<tr data-id="<%= id %>"><td><input type="checkbox" value="<%= id %>" class="ad-checkbox"></td><td><%= code %></td><td><%= name %></td><td><a href="<%= url_edit %>" class="btn btn-xs btn-primary"><i class="fa fa-pencil-square-o"></i> <%= edit_label %></a>\n<a href="#" data-toggle="modal" data-target=".ad-delete" data-id="<%= id %>" class="btn btn-xs btn-danger ad-confirm"><i class="fa fa-trash-o"></i> <%= delete_label %></a></td></tr>',new_role_tpl:'<tr class="move" data-id="<%= id %>"><td><input type="checkbox" value="<%= id %>" class="ad-checkbox"></td><td><%= rolename %></td><td><%= level %></td><td><a href="<%= url_edit %>" class="btn btn-xs btn-primary"><i class="fa fa-pencil-square-o"></i> <%= edit_label %></a>\n<a href="#" data-toggle="modal" data-target=".ad-delete" data-id="<%= id %>" class="btn btn-xs btn-danger ad-confirm"><i class="fa fa-trash-o"></i> <%= delete_label %></a></td></tr>',new_user_tpl:'<tr data-id="<%= id %>"><td><input type="checkbox" value="<%= id %>" class="ad-checkbox"></td><td><%= username %></td><td><%= email %></td><td><%= role_name %> (<%= role_level %>)</td><td><a href="<%= url_edit %>" class="btn btn-xs btn-primary"><i class="fa fa-pencil-square-o"></i> <%= edit_label %></a>\n<a href="#" data-toggle="modal" data-target=".ad-delete" data-id="<%= id %>" class="btn btn-xs btn-danger ad-confirm"><i class="fa fa-trash-o"></i> <%= delete_label %></a></td></tr>',stop_btn_tpl:'<a href="#" data-id="<%= tid %>" class="btn btn-xs btn-danger activity-stop ad-hover" data-hover="stop"><span class="elapsed ad-elapsing" data-start=<%= total_seconds %>></span></a>\n',start_btn_tpl:'<a href="#" data-id="<%= tid %>" class="btn btn-xs btn-primary ad-loading activity-start"><i class="fa fa-play"></i> <%= start_label %></a>\n'},AD.Toggle={$change_lang:$("#change-lang"),$change_zone:$("#change-zone"),$layout_wrapper:$(".layout-wrapper"),$block_wrapper:null,$was_checked:null,must_save:!1,init:function(){this.toggleSearch(),this.toggleActive()},toggleApi:function(){$(".api-toggle").on("click",function(e){e.preventDefault(),$(this).closest("div").find(".api").toggle()})},toggleSelect:function(){var e=this;$(".ad-select").on("click",".ad-checkbox",function(t){var a=$(this);if(e.$was_checked=a.parents(".ad-select").find("input[type=checkbox]:checked"),AD.UI.checkBoxSpin()&&AD.UI.$box_checked!=a&&AD.UI.resetCheckbox(),AD.UI.$box_checked=a,AD.UI.resetOtherCheckboxes(),AD.UI.checkBoxSpin())t.preventDefault();else{var i=a.val(),n=a.parents("form").attr("action"),r=a.parents("form").data("user");$.post(n,{item_id:i,user_id:r},function(t){"error"==t.status?e.$was_checked.prop("checked",!0):AD.UI.$box_status=!0,AD.UI.createAlertMessage(t,null,null)},"json").done(function(){AD.UI.resetCheckbox()})}})},toggleActive:function(){$(".ad-active").on("click",".ad-checkbox",function(e){var t=$(this);if(AD.UI.checkBoxSpin()&&AD.UI.$box_checked!=t&&AD.UI.resetCheckbox(),AD.UI.$box_checked=t,AD.UI.checkBoxSpin())e.preventDefault();else{var a=t.val(),i=this.checked?1:0,n=t.parents("form").attr("action");$.post(n,{item_id:a,action:i},function(){},"json").done(function(){AD.UI.resetCheckbox()})}})},toggleSetting:function(){$(".ad-setting").on("change","select",function(e){e.preventDefault();var t=$(this),a=t.attr("name"),i=t.val(),n=t.parents("form").attr("action");$.post(n,{item_name:a,value:i},function(e){AD.UI.createAlertMessage(e,null,null)},"json").done(function(){AD.UI.resetCheckbox()})})},toggleDelete:function(e,t){var a=[];$(".ad-deleting").on("click",":checkbox",function(){var i=$(this),n=this.checked?!1:!0,r=i.parent().next(e),o=r.data("id"),s=r.data("link");void 0==a[o]&&(a[o]=r.hasClass("active"));var l=i.is("[data-page]")?i.data("page")+"/":"",c=AD.Utils.url(s+"/edit/"+l+r.data("id")),d=(r.attr("href"),r.data("arrow")),u="fa-chevron-"+d,p="page"==r.data("link")?".page-delete":".ad-delete";n?(r.addClass(t).attr("data-toggle","modal").attr("data-target",p).attr("href","#"),a[o]&&r.removeClass("active"),r.find("i").toggleClass(u+" fa-trash-o")):(r.removeClass(t).removeAttr("data-toggle").removeAttr("data-target").attr("href",c),a[o]&&r.addClass("active"),r.find("i").toggleClass("fa-trash-o "+u))})},toggleOptions:function(){$(".options-toggle").on("click",function(e){e.preventDefault(),AD.UI.$body.toggleClass("push-left")})},toggleTools:function(){$(".tools-toggle").on("click",function(e){e.preventDefault(),AD.UI.$body.toggleClass("hide-tools")})},togglePages:function(){var e=this;$(".pages-toggle").on("click",function(t){t.preventDefault(),AD.UI.$body.hasClass("push-left")&&(AD.UI.$body.removeClass(),e.resetBlocksLayout()),AD.UI.$body.toggleClass("push-right")})},toggleSearch:function(){$(".search-toggle").on("click",function(e){e.preventDefault(),AD.UI.$breadcrumb.toggleClass("search-open")})},untoggleOverlay:function(){var e=this;AD.UI.$overlay.on("click",function(){AD.UI.$body.removeClass("push-left push-right"),e.resetBlocksLayout()})},resetBlocksLayout:function(){AD.UI.$layout_radio&&(AD.UI.$layout_radio.prop("checked",!1),this.$block_wrapper.empty())}},AD.Utils={mobileBrowser:function(){return jQuery.browser.mobile?!0:!1},blockId:function(){var e=$("input[name=current_block]");return e.length>0?e.val():0},pageId:function(){var e=$("input[name=current_page]");return e.length>0?e.val():0},site:function(e){return AD.site+e},url:function(e){return AD.base+"/"+e}},AD.VM={countChars:function(e,t){var a=e().length,i=e();return a>t?(e(i.substring(0,t)),0):t-a},makeSlug:function(e){return e.trim().toLowerCase().replace(/ +/g,"-").replace(/-+/g,"-")},blockEdit:function(){var e=this;e.itemName=ko.observable($("#name").val()),e.blockAttrib=ko.observable($("#attrib").val()),e.createAttrib=function(){var t=e.itemName(),a=t.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-");e.blockAttrib(a)}},codeEdit:function(){var e=this;e.itemName=ko.observable($("#name").val())},pageEdit:function(){var e=this;e.itemName=ko.observable($("#name").val()),e.pageSlug=ko.observable($("#slug").val()),e.slug=ko.computed(function(){return e.pageSlug()}),e.pageTitle=ko.observable($("#title").val()),e.pageDescr=ko.observable($("#descr").val()),e.titleLen=ko.computed(function(){var t=e.pageTitle;return AD.VM.countChars(t,70)}),e.descrLen=ko.computed(function(){var t=e.pageDescr;return AD.VM.countChars(t,250)}),e.createSlugName=function(){var t=AD.VM.makeSlug(e.itemName());$("#slug").val(t),$("#slug-last").html(t)},e.createSlugThis=function(){var e=$("#slug"),t=e.val(),a=AD.VM.makeSlug(t);$("#slug").val(a),$("#slug-last").html(a)}},roleEdit:function(){var e=this;e.itemName=ko.observable($("#name").val())},userEdit:function(){var e=this;e.itemName=ko.observable($("#username").val()),e.itemPassword=ko.observable($("#password").val()),e.itemConfirmed=ko.observable($("#password_confirmation").val()),e.iconFeedbackError=ko.observable(!1),e.iconFeedback=ko.observable(!1),e.iconCheckError=ko.observable(!1),e.iconCheck=ko.observable(!1),e.fieldStatus=ko.computed(function(){var t=e.itemPassword().length,a="form-group";return t>0&&8>t&&(a+=" has-error has-feedback",e.iconFeedbackError(!0),e.iconFeedback(!1)),t>=8&&(a+=" has-success has-feedback",e.iconFeedbackError(!1),e.iconFeedback(!0)),0==t&&(e.iconFeedbackError(!1),e.iconFeedback(!1)),a},e),e.passwordCheck=ko.computed(function(){var t="form-group",a=e.itemConfirmed().length;return a>0&&e.itemConfirmed()===e.itemPassword()&&(e.iconCheckError(!1),e.iconCheck(!0),t+=" has-success has-feedback"),a>0&&e.itemConfirmed()!==e.itemPassword()&&(e.iconCheckError(!0),e.iconCheck(!1),t+=" has-error has-feedback"),0==a&&(e.iconCheckError(!1),e.iconCheck(!1)),t})}},$(function(){AD.UI.init(),console.log("AD.js loaded and minified!",new Date)});